# 🤖 LLM Prompts 完整清單

本文檔列出 AI News Worker 系統中所有使用 LLM 的 prompt。

---

## 📋 Prompt 1: 單篇文章分類分析

**函數**: `analyze_article(text)`  
**檔案**: `backend/ai_service.py`  
**模型**: `gpt-4o-mini`  
**溫度**: `0.3`  
**輸出格式**: JSON

### System Prompt

```
# Role
你是一位繁體中文的資深科技產業分析師。

# Task
閱讀【新聞內容】，回傳以下 JSON 格式：
{
  "summary": "敘述性摘要(繁體中文)",
  "highlights": "<li><b>重點1：</b>內容</li><li><b>重點2：</b>內容</li><li><b>重點3：</b>內容</li>",
  "category": "分類(如:人工智慧,區塊鏈,硬體,商業,資安,或自訂)",
  "insight": "一句話產業深度洞察"
}
```

### User Input

```
[新聞內容文字，最多2500字]
```

### 輸出範例

```json
{
  "summary": "OpenAI 發布了最新的 GPT-4 Turbo 模型，在處理速度和成本效益方面有顯著提升...",
  "highlights": "<li><b>重點1：</b>GPT-4 Turbo 處理速度提升2倍</li><li><b>重點2：</b>成本降低50%</li><li><b>重點3：</b>支援更長的上下文</li>",
  "category": "人工智慧",
  "insight": "AI 模型正朝著更高效、更經濟的方向發展，將加速企業採用"
}
```

### 用途

- 分析每篇新聞文章
- 提取分類資訊（用於後續分組）
- 生成摘要和重點
- 提供產業洞察

---

## 📋 Prompt 2: 分類群組統合分析

**函數**: `analyze_category_group(category_name, articles_in_category)`  
**檔案**: `backend/ai_service.py`  
**模型**: `gpt-4o-mini`  
**溫度**: `0.4`  
**輸出格式**: JSON

### System Prompt

```
你是一位繁體中文的資深科技產業分析師。

請分析以下同一分類的多篇新聞文章，生成統合分析。

回傳 JSON 格式：
{
  "category": "分類名稱（與輸入相同）",
  "summary": "統合摘要（200-300字，繁體中文）",
  "key_points": ["重點1", "重點2", "重點3", "重點4"],
  "trend_analysis": "趨勢分析與產業影響（150-200字，繁體中文）"
}
```

### User Input

```
分類：[分類名稱]
文章數量：[數量]
文章標題：[標題1, 標題2, ...]

文章內容：

【標題1】
[文章內容1]

【標題2】
[文章內容2]

...
```

### 輸出範例

```json
{
  "category": "人工智慧",
  "summary": "過去24小時內，人工智慧領域出現多項重要進展。OpenAI 發布 GPT-4 Turbo，Google 推出 Gemini Pro，微軟宣布 Copilot 整合新功能。整體趨勢顯示 AI 模型正朝著更高效、更實用的方向發展，企業採用率持續上升。",
  "key_points": [
    "GPT-4 Turbo 處理速度提升2倍，成本降低50%",
    "Google Gemini Pro 在多模態能力上取得突破",
    "微軟 Copilot 整合更多 Office 應用程式",
    "企業 AI 採用率較去年同期增長300%"
  ],
  "trend_analysis": "AI 模型正從實驗階段進入大規模商業應用。成本降低和效能提升將加速企業數位轉型，但也帶來就業市場結構性變化的挑戰。投資者應關注具備實際應用場景的 AI 公司。"
}
```

### 用途

- 統合同一分類下的多篇文章
- 生成分類層級的深度分析
- 識別分類內的關鍵趨勢
- 提供產業影響評估

---

## 📋 Prompt 3: 每日決策日報生成

**函數**: `generate_daily_briefing(category_analyses)`  
**檔案**: `backend/ai_service.py`  
**模型**: `gpt-4o-mini`  
**溫度**: `0.6`  
**輸出格式**: Markdown

### System Prompt

```
你是一位加密貨幣與科技產業的【首席策略官】。

請根據提供的分類分析結果，撰寫一份 Markdown 格式的【每日決策日報】。

結構如下：

## 📊 市場情緒儀表板
(根據所有分類的內容，判斷整體市場氣氛、關鍵熱詞、投資者情緒)

## 🌊 核心趨勢分析
(根據各分類的趨勢分析，歸納出最重要的3-5條故事線，每條包含：
- 趨勢標題
- 簡要說明
- 影響範圍)

## 🧭 決策指引
(給開發者與投資者的具體建議，包含：
- 技術開發建議
- 投資策略建議
- 風險提醒)

## 📈 分類摘要
(簡要列出各分類的核心要點)
```

### User Input

```
【分類分析結果】

## 人工智慧 (5篇)
摘要：[統合摘要]
重點：[重點1, 重點2, 重點3]
趨勢：[趨勢分析]

## 區塊鏈 (3篇)
摘要：[統合摘要]
重點：[重點1, 重點2, 重點3]
趨勢：[趨勢分析]

...
```

### 輸出範例

```markdown
## 📊 市場情緒儀表板

過去24小時，科技市場呈現**積極樂觀**的氛圍。AI 和區塊鏈領域的突破性進展帶動整體情緒上升。關鍵熱詞包括：GPT-4 Turbo、Gemini Pro、比特幣ETF、DeFi 創新。投資者對技術進步和市場機會表現出強烈興趣，但同時關注監管風險。

## 🌊 核心趨勢分析

### 1. AI 模型效率革命
**說明**：OpenAI 和 Google 相繼發布更高效、更經濟的 AI 模型，標誌著 AI 從實驗階段進入大規模商業應用。
**影響範圍**：企業數位轉型、軟體開發、內容創作產業

### 2. 加密貨幣監管明朗化
**說明**：比特幣 ETF 獲批進展順利，監管框架逐漸清晰，為機構投資者進入市場鋪路。
**影響範圍**：加密貨幣交易、區塊鏈應用、金融科技

### 3. 企業 AI 採用加速
**說明**：微軟 Copilot 等企業 AI 工具整合度提升，企業採用率較去年同期增長300%。
**影響範圍**：企業軟體、生產力工具、人力資源

## 🧭 決策指引

### 技術開發建議
- **AI 整合**：考慮將 GPT-4 Turbo 或 Gemini Pro 整合到產品中，可大幅提升用戶體驗
- **成本優化**：利用新模型的成本優勢，重新評估 AI 功能的商業模式
- **多模態能力**：探索圖像、語音等多模態 AI 應用場景

### 投資策略建議
- **關注 AI 基礎設施**：投資具備實際應用場景的 AI 公司
- **區塊鏈 ETF**：考慮配置比特幣 ETF，分散投資風險
- **企業軟體**：關注 AI 整合度高的企業軟體公司

### 風險提醒
- **監管不確定性**：AI 和加密貨幣監管政策仍在演變，需密切關注
- **市場波動**：技術突破可能導致市場過度反應，注意風險控制
- **就業影響**：AI 自動化可能帶來就業市場結構性變化

## 📈 分類摘要

- **人工智慧**：模型效率提升，企業採用加速
- **區塊鏈**：監管明朗化，機構投資增加
- **硬體**：晶片需求持續增長
- **商業**：數位轉型投資增加
```

### 用途

- 生成完整的每日決策日報
- 提供市場情緒分析
- 識別核心趨勢
- 給出具體的決策建議

---

## 📊 Prompt 使用統計

| Prompt | 模型 | 溫度 | 用途 | 頻率 |
|--------|------|------|------|------|
| 單篇文章分析 | gpt-4o-mini | 0.3 | 分類和摘要 | 每篇文章1次 |
| 分類群組分析 | gpt-4o-mini | 0.4 | 統合分析 | 每個分類1次（最多5次） |
| 日報生成 | gpt-4o-mini | 0.6 | 生成日報 | 每天1次 |

---

## 🔧 Prompt 設計原則

### 1. 角色設定
- **單篇分析**：資深科技產業分析師
- **分類分析**：資深科技產業分析師
- **日報生成**：首席策略官

### 2. 溫度設定
- **0.3**：用於需要準確分類和摘要的任務
- **0.4**：用於需要平衡準確性和創造性的統合分析
- **0.6**：用於需要更多創造性的日報生成

### 3. 輸出格式
- **JSON**：用於結構化資料（分類、摘要）
- **Markdown**：用於最終日報展示

### 4. 內容限制
- 單篇文章：最多2500字
- 分類統合：最多8000字
- 日報輸入：最多6000字

---

## 💡 Prompt 優化建議

### 可改進方向

1. **增加範例**：在 prompt 中加入 few-shot examples
2. **細化角色**：更明確的角色描述和專業背景
3. **結構化輸出**：更詳細的輸出格式說明
4. **上下文增強**：加入歷史資料或市場背景

### 成本優化

- 使用 `gpt-4o-mini` 而非 `gpt-4` 以降低成本
- 限制輸入長度避免 token 浪費
- 使用 `response_format` 確保 JSON 格式正確

---

## 📝 維護注意事項

1. **定期檢視**：根據實際輸出品質調整 prompt
2. **A/B 測試**：嘗試不同的 prompt 版本
3. **監控成本**：追蹤每次 API 呼叫的 token 使用量
4. **錯誤處理**：確保 prompt 失敗時有適當的 fallback

---

## 🔗 相關檔案

- `backend/ai_service.py` - 所有 prompt 的實作
- `backend/scheduler.py` - 工作流程控制
- `新工作流程說明.md` - 完整流程說明

