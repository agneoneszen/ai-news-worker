# ğŸ” å•é¡Œæ’æŸ¥æŒ‡å—

## âŒ å•é¡Œ 1: æœ¬åœ°æ¸¬è©¦æ²’æœ‰çµæœï¼Œå¿«å–çµ±è¨ˆ total = 0

### å¯èƒ½åŸå› 

1. **æ²’æœ‰æŠ“å–åˆ°æ–°è**
   - RSS ä¾†æºæ²’æœ‰éå»24å°æ™‚å…§çš„æ–°è
   - RSS ä¾†æºç„¡æ³•è¨ªå•
   - æ™‚é–“éæ¿¾å¤ªåš´æ ¼

2. **AI åˆ†æå¤±æ•—**
   - OPENAI_API_KEY æœªè¨­å®šæˆ–ç„¡æ•ˆ
   - API é…é¡ç”¨ç›¡
   - ç¶²è·¯é€£ç·šå•é¡Œ

3. **æµç¨‹æå‰çµ‚æ­¢**
   - æ²’æœ‰æ–°èæ™‚æœƒç›´æ¥çµ‚æ­¢
   - æ‰€æœ‰åˆ†æå¤±æ•—æ™‚æœƒçµ‚æ­¢

### è§£æ±ºæ­¥é©Ÿ

#### æ­¥é©Ÿ 1: æ¸¬è©¦ RSS æŠ“å–

```bash
cd backend
python3 test_scraper_only.py
```

**é æœŸè¼¸å‡º**:
```
ğŸ“Š çµæœ: å…±æŠ“å– X ç¯‡æ–°è
```

**å¦‚æœçµæœç‚º 0**:
- æª¢æŸ¥ç¶²è·¯é€£ç·š
- æª¢æŸ¥ RSS ä¾†æºæ˜¯å¦æ­£å¸¸
- å¯ä»¥æš«æ™‚æ”¾å¯¬æ™‚é–“éæ¿¾æ¢ä»¶ï¼ˆä¿®æ”¹ `scraper.py`ï¼‰

#### æ­¥é©Ÿ 2: æ¸¬è©¦ AI åˆ†æ

```bash
cd backend
python3 test_ai_only.py
```

**é æœŸè¼¸å‡º**:
```
âœ… AI åˆ†ææˆåŠŸï¼
ğŸ“Š åˆ†æçµæœ:
  - åˆ†é¡: äººå·¥æ™ºæ…§
  - æ‘˜è¦: ...
  - ä¿¡å¿ƒåº¦: 0.75
```

**å¦‚æœå¤±æ•—**:
- æª¢æŸ¥ `.env` æª”æ¡ˆæ˜¯å¦å­˜åœ¨
- æª¢æŸ¥ `OPENAI_API_KEY` æ˜¯å¦æ­£ç¢º
- æª¢æŸ¥ API é…é¡

#### æ­¥é©Ÿ 3: æª¢æŸ¥ç’°å¢ƒè®Šæ•¸

```bash
cd backend
cat .env
```

æ‡‰è©²çœ‹åˆ°ï¼š
```
OPENAI_API_KEY=sk-...
```

#### æ­¥é©Ÿ 4: åŸ·è¡Œå®Œæ•´æ¸¬è©¦

```bash
cd backend
./run_local.sh
```

æŸ¥çœ‹è©³ç´°æ—¥èªŒï¼Œç¢ºèªï¼š
- æ˜¯å¦æœ‰æŠ“å–åˆ°æ–°è
- æ˜¯å¦æœ‰åŸ·è¡Œ AI åˆ†æ
- æ˜¯å¦æœ‰å¯«å…¥ Firestore

---

## âŒ å•é¡Œ 2: Firestore è³‡æ–™åº«ä¸­æ²’æœ‰è³‡æ–™

### å¯èƒ½åŸå› 

1. **å¯«å…¥å¤±æ•—**
   - Firebase æœå‹™å¸³è™Ÿé‡‘é‘°éŒ¯èª¤
   - Firestore æ¬Šé™è¨­å®šéŒ¯èª¤
   - ç¶²è·¯é€£ç·šå•é¡Œ

2. **æµç¨‹æœªåŸ·è¡Œ**
   - æ²’æœ‰æ–°èå¯è™•ç†
   - æ‰€æœ‰åˆ†æå¤±æ•—
   - æµç¨‹æå‰çµ‚æ­¢

3. **æ—¥æœŸä¸åŒ¹é…**
   - æŸ¥çœ‹çš„æ—¥æœŸèˆ‡åŸ·è¡Œæ—¥æœŸä¸åŒ

### è§£æ±ºæ­¥é©Ÿ

#### æ­¥é©Ÿ 1: æª¢æŸ¥ Firebase é…ç½®

```bash
cd backend
ls -la serviceAccountKey.json
```

ç¢ºèªæª”æ¡ˆå­˜åœ¨ä¸”æ ¼å¼æ­£ç¢ºï¼ˆJSONï¼‰ã€‚

#### æ­¥é©Ÿ 2: æª¢æŸ¥ Firestore è¦å‰‡

1. å‰å¾€ [Firebase Console](https://console.firebase.google.com)
2. Firestore Database > Rules
3. ç¢ºèªå¯«å…¥æ¬Šé™ï¼š

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /daily_news/{document=**} {
      allow read, write: if true; // é–‹ç™¼ç’°å¢ƒï¼Œç”Ÿç”¢ç’°å¢ƒè«‹è¨­å®šé©ç•¶æ¬Šé™
    }
  }
}
```

#### æ­¥é©Ÿ 3: æª¢æŸ¥åŸ·è¡Œæ—¥èªŒ

æŸ¥çœ‹æ¸¬è©¦è¼¸å‡ºï¼Œç¢ºèªï¼š
- âœ… æ˜¯å¦æœ‰ "ğŸ’¾ [5/5] æ­£åœ¨å¯«å…¥è³‡æ–™åº«..."
- âœ… æ˜¯å¦æœ‰ "âœ… ä»»å‹™æˆåŠŸï¼çœŸå¯¦æ—¥å ±å·²å­˜å…¥"
- âœ… æ˜¯å¦æœ‰ "âœ… Firestore å¯«å…¥é©—è­‰æˆåŠŸ"

#### æ­¥é©Ÿ 4: æ‰‹å‹•é©—è­‰å¯«å…¥

```python
# åœ¨ Python ä¸­åŸ·è¡Œ
from scheduler import db
import datetime

today_str = datetime.datetime.now().strftime("%Y-%m-%d")
doc_ref = db.collection('daily_news').document(today_str)
doc = doc_ref.get()

if doc.exists:
    print("âœ… æ‰¾åˆ°è³‡æ–™")
    print(doc.to_dict())
else:
    print("âŒ æ²’æœ‰è³‡æ–™")
```

#### æ­¥é©Ÿ 5: æª¢æŸ¥æ—¥æœŸ

ç¢ºèªæŸ¥çœ‹çš„æ—¥æœŸèˆ‡åŸ·è¡Œæ—¥æœŸä¸€è‡´ï¼š
- å¦‚æœä»Šå¤©åŸ·è¡Œï¼ŒæŸ¥çœ‹ä»Šå¤©çš„æ—¥æœŸ
- å¦‚æœæ˜¨å¤©åŸ·è¡Œï¼ŒæŸ¥çœ‹æ˜¨å¤©çš„æ—¥æœŸ

---

## ğŸ”§ å®Œæ•´è¨ºæ–·æµç¨‹

### 1. ç’°å¢ƒæª¢æŸ¥

```bash
cd backend
python3 check_setup.py
```

æ‡‰è©²çœ‹åˆ°æ‰€æœ‰æª¢æŸ¥é …ç›®éƒ½é€šéã€‚

### 2. é€æ­¥æ¸¬è©¦

```bash
# 1. æ¸¬è©¦ RSS æŠ“å–
python3 test_scraper_only.py

# 2. æ¸¬è©¦ AI åˆ†æ
python3 test_ai_only.py

# 3. å®Œæ•´æ¸¬è©¦
./run_local.sh
```

### 3. æŸ¥çœ‹è©³ç´°æ—¥èªŒ

åŸ·è¡Œæ¸¬è©¦æ™‚ï¼Œæ³¨æ„ä»¥ä¸‹é—œéµè¨Šæ¯ï¼š

**RSS æŠ“å–**:
```
âœ… [Scraper] æˆåŠŸæŠ“å– X ç¯‡éå»24å°æ™‚å…§çš„çœŸå¯¦æ–°èã€‚
```

**AI åˆ†æ**:
```
ğŸ’¾ [Cache] ä½¿ç”¨å¿«å–çµæœ: article (...)
æˆ–
ğŸ’¾ [Cache] å·²å„²å­˜å¿«å–: article (...)
```

**Firestore å¯«å…¥**:
```
ğŸ’¾ æº–å‚™å¯«å…¥è³‡æ–™åˆ°: daily_news/2025-12-26
âœ… ä»»å‹™æˆåŠŸï¼çœŸå¯¦æ—¥å ±å·²å­˜å…¥
âœ… Firestore å¯«å…¥é©—è­‰æˆåŠŸ
```

---

## ğŸ†˜ å¸¸è¦‹éŒ¯èª¤è¨Šæ¯

### éŒ¯èª¤ 1: "OPENAI_API_KEY not found"

**è§£æ±º**:
```bash
cd backend
echo "OPENAI_API_KEY=sk-..." > .env
```

### éŒ¯èª¤ 2: "serviceAccountKey.json not found"

**è§£æ±º**:
1. å‰å¾€ Firebase Console
2. å°ˆæ¡ˆè¨­å®š > æœå‹™å¸³è™Ÿ
3. ç”¢ç”Ÿæ–°çš„ç§å¯†é‡‘é‘°
4. ä¸‹è¼‰ä¸¦æ”¾åˆ° `backend/` ç›®éŒ„

### éŒ¯èª¤ 3: "Permission denied" (Firestore)

**è§£æ±º**:
1. æª¢æŸ¥ Firestore è¦å‰‡
2. ç¢ºèªæœå‹™å¸³è™Ÿæœ‰å¯«å…¥æ¬Šé™
3. æª¢æŸ¥ Firebase å°ˆæ¡ˆè¨­å®š

### éŒ¯èª¤ 4: "No news found"

**è§£æ±º**:
- æª¢æŸ¥ RSS ä¾†æºæ˜¯å¦æ­£å¸¸
- æš«æ™‚æ”¾å¯¬æ™‚é–“éæ¿¾æ¢ä»¶
- æª¢æŸ¥ç¶²è·¯é€£ç·š

---

## ğŸ“ æª¢æŸ¥æ¸…å–®

### ç’°å¢ƒè¨­å®š
- [ ] `.env` æª”æ¡ˆå­˜åœ¨ä¸”åŒ…å« `OPENAI_API_KEY`
- [ ] `serviceAccountKey.json` å­˜åœ¨
- [ ] Python ä¾è³´å·²å®‰è£

### RSS æŠ“å–
- [ ] ç¶²è·¯é€£ç·šæ­£å¸¸
- [ ] RSS ä¾†æºå¯è¨ªå•
- [ ] æœ‰éå»24å°æ™‚å…§çš„æ–°è

### AI åˆ†æ
- [ ] OpenAI API Key æœ‰æ•ˆ
- [ ] API é…é¡å……è¶³
- [ ] åˆ†ææˆåŠŸï¼ˆæœ‰å¿«å–æˆ–æ–°åˆ†æï¼‰

### Firestore å¯«å…¥
- [ ] Firebase é…ç½®æ­£ç¢º
- [ ] Firestore è¦å‰‡å…è¨±å¯«å…¥
- [ ] å¯«å…¥é©—è­‰æˆåŠŸ

---

## ğŸ”— ç›¸é—œæª”æ¡ˆ

- `backend/test_local.py` - å®Œæ•´æ¸¬è©¦è…³æœ¬
- `backend/test_scraper_only.py` - RSS æŠ“å–æ¸¬è©¦
- `backend/test_ai_only.py` - AI åˆ†ææ¸¬è©¦
- `backend/check_setup.py` - ç’°å¢ƒæª¢æŸ¥
- `docs/å¦‚ä½•æŸ¥çœ‹çµæœ.md` - æŸ¥çœ‹çµæœæŒ‡å—

