# ğŸ“Š å¦‚ä½•æŸ¥çœ‹çµæœ

æœ¬æŒ‡å—èªªæ˜å¦‚ä½•æŸ¥çœ‹ AI News Worker çš„å„ç¨®çµæœã€‚

## ğŸ¯ æŸ¥çœ‹æ–¹å¼ç¸½è¦½

1. **æœ¬åœ°æ¸¬è©¦çµæœ** - çµ‚ç«¯æ©Ÿè¼¸å‡º
2. **Firestore è³‡æ–™åº«** - Firebase Console
3. **å‰ç«¯ç¶²ç«™** - Vercel éƒ¨ç½²çš„ç¶²ç«™
4. **Railway æ—¥èªŒ** - éƒ¨ç½²å¹³å°æ—¥èªŒ
5. **å¿«å–çµ±è¨ˆ** - æœ¬åœ°å¿«å–æª”æ¡ˆ

---

## 1ï¸âƒ£ æŸ¥çœ‹æœ¬åœ°æ¸¬è©¦çµæœ

### æ–¹æ³• 1: çµ‚ç«¯æ©Ÿè¼¸å‡º

åŸ·è¡Œæ¸¬è©¦å¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒé¡¯ç¤ºå®Œæ•´æµç¨‹ï¼š

```bash
cd backend
./run_local.sh
```

**è¼¸å‡ºç¯„ä¾‹**:
```
ğŸ§ª æœ¬åœ°æ¸¬è©¦ç’°å¢ƒ
============================================================

ğŸ“‹ [1/3] æª¢æŸ¥ç’°å¢ƒè¨­å®š...
âœ… ç’°å¢ƒæª¢æŸ¥é€šé

ğŸ“‹ [2/3] æª¢æŸ¥å¿…è¦æª”æ¡ˆ...
âœ… æ‰€æœ‰å¿…è¦æª”æ¡ˆå­˜åœ¨

ğŸ“‹ [3/3] åŸ·è¡Œæ¸¬è©¦æµç¨‹...

ğŸš€ é–‹å§‹åŸ·è¡Œæ¯æ—¥ä»»å‹™ï¼š2025-12-26
ğŸ•·ï¸ [Scraper] é–‹å§‹æŠ“å–å¤–éƒ¨ RSSï¼ˆéå»24å°æ™‚ï¼‰...
âœ… [Scraper] æˆåŠŸæŠ“å– 15 ç¯‡éå»24å°æ™‚å…§çš„çœŸå¯¦æ–°èã€‚
ğŸ§  [2/5] æ­£åœ¨åˆ†é¡ 15 ç¯‡æ–°èï¼ˆä¸¦è¡Œè™•ç†ï¼‰...
  [1/15] å·²åˆ†é¡: Example News... -> äººå·¥æ™ºæ…§ (ä¿¡å¿ƒåº¦: 0.75)
  [2/15] å·²åˆ†é¡: Another News... -> å€å¡Šéˆ (ä¿¡å¿ƒåº¦: 0.68)
  ...
ğŸ“š [3/5] æ­£åœ¨çµ±åˆä¸¦åˆ†æ 3 å€‹åˆ†é¡...
  - åˆ†æåˆ†é¡ã€Œäººå·¥æ™ºæ…§ã€(5ç¯‡)...
    âœ… å®Œæˆ
  ...
ğŸ“ [4/5] æ­£åœ¨æ’°å¯«æ¯æ—¥æ±ºç­–æ—¥å ±...
ğŸ’¾ [5/5] æ­£åœ¨å¯«å…¥è³‡æ–™åº«...
âœ… ä»»å‹™æˆåŠŸï¼çœŸå¯¦æ—¥å ±å·²å­˜å…¥: daily_news/2025-12-26
   ğŸ“Š çµ±è¨ˆ: 15 ç¯‡æ–‡ç« ï¼Œ3 å€‹åˆ†é¡

============================================================
âœ… æ¸¬è©¦å®Œæˆï¼
============================================================

ğŸ“Š å¿«å–çµ±è¨ˆ:
{
  "total": 18,
  "by_type": {
    "article": 15,
    "category": 3
  }
}
```

### æ–¹æ³• 2: æŸ¥çœ‹å¿«å–çµ±è¨ˆ

```bash
cd backend
python3 -c "from cache_manager import get_cache_stats; import json; print(json.dumps(get_cache_stats(), indent=2, ensure_ascii=False))"
```

### æ–¹æ³• 3: æŸ¥çœ‹å¿«å–æª”æ¡ˆ

```bash
cd backend
ls -la .llm_cache/
cat .llm_cache/article_*.json | head -50
```

---

## 2ï¸âƒ£ æŸ¥çœ‹ Firestore è³‡æ–™åº«

### æ­¥é©Ÿ 1: å‰å¾€ Firebase Console

1. æ‰“é–‹ [Firebase Console](https://console.firebase.google.com)
2. é¸æ“‡æ‚¨çš„å°ˆæ¡ˆ

### æ­¥é©Ÿ 2: æŸ¥çœ‹ Firestore Database

1. åœ¨å·¦å´é¸å–®é»æ“Š **Firestore Database**
2. åœ¨ Collections ä¸­æ‰¾åˆ° `daily_news`
3. é»æ“Šé€²å…¥æŸ¥çœ‹æ–‡ä»¶

### æ­¥é©Ÿ 3: æŸ¥çœ‹æ—¥å ±å…§å®¹

**æ–‡ä»¶çµæ§‹**:
```
daily_news/
â””â”€â”€ 2025-12-26/
    â”œâ”€â”€ date_str: "2025-12-26"
    â”œâ”€â”€ content: "## ä»Šæ—¥ä¸‰å¥è©±ï¼ˆTL;DRï¼‰..."
    â”œâ”€â”€ article_count: 15
    â”œâ”€â”€ category_count: 3
    â”œâ”€â”€ categories: ["äººå·¥æ™ºæ…§", "å€å¡Šéˆ", "ç¡¬é«”"]
    â”œâ”€â”€ category_summaries: [...]
    â”œâ”€â”€ created_at: Timestamp
    â””â”€â”€ status: "published"
```

**æŸ¥çœ‹æ–¹å¼**:
- é»æ“Šæ–‡ä»¶æŸ¥çœ‹å®Œæ•´å…§å®¹
- `content` æ¬„ä½åŒ…å«å®Œæ•´çš„ Markdown æ—¥å ±
- `category_summaries` åŒ…å«å„åˆ†é¡çš„è©³ç´°åˆ†æ

### æ­¥é©Ÿ 4: é©—è­‰è³‡æ–™

ç¢ºèªä»¥ä¸‹æ¬„ä½ï¼š
- âœ… `date_str` æ˜¯ä»Šå¤©çš„æ—¥æœŸ
- âœ… `content` åŒ…å«å®Œæ•´çš„æ—¥å ±å…§å®¹
- âœ… `article_count` > 0
- âœ… `category_count` > 0
- âœ… `created_at` æ˜¯æœ€è¿‘çš„æ™‚é–“æˆ³è¨˜

---

## 3ï¸âƒ£ æŸ¥çœ‹å‰ç«¯ç¶²ç«™

### æ­¥é©Ÿ 1: å–å¾—ç¶²ç«™ URL

1. å‰å¾€ [Vercel Dashboard](https://vercel.com/dashboard)
2. é»æ“Šå°ˆæ¡ˆ `ai-news-worker`
3. åœ¨ **Deployments** æ¨™ç±¤ä¸­æ‰¾åˆ°æœ€æ–°çš„éƒ¨ç½²
4. é»æ“Šéƒ¨ç½²æŸ¥çœ‹ **Preview URL**

### æ­¥é©Ÿ 2: æ‰“é–‹ç¶²ç«™

1. åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ Preview URL
2. æ‡‰è©²æœƒçœ‹åˆ°æœ€æ–°çš„æ—¥å ±å…§å®¹

### æ­¥é©Ÿ 3: æª¢æŸ¥åŠŸèƒ½

**ç¢ºèªé …ç›®**:
- âœ… é é¢æ­£å¸¸è¼‰å…¥
- âœ… é¡¯ç¤ºæœ€æ–°æ—¥å ±ï¼ˆMarkdown æ ¼å¼ï¼‰
- âœ… æ—¥æœŸæ­£ç¢º
- âœ… å…§å®¹å®Œæ•´ï¼ˆåŒ…å«æ‰€æœ‰ç« ç¯€ï¼‰
- âœ… æ²’æœ‰éŒ¯èª¤è¨Šæ¯ï¼ˆF12 Consoleï¼‰

### æ­¥é©Ÿ 4: æª¢æŸ¥ Console

1. æŒ‰ `F12` æ‰“é–‹é–‹ç™¼è€…å·¥å…·
2. å‰å¾€ **Console** æ¨™ç±¤
3. ç¢ºèªæ²’æœ‰éŒ¯èª¤è¨Šæ¯
4. å¦‚æœæœ‰éŒ¯èª¤ï¼Œæª¢æŸ¥ Firebase é…ç½®

---

## 4ï¸âƒ£ æŸ¥çœ‹ Railway æ—¥èªŒ

### æ­¥é©Ÿ 1: å‰å¾€ Railway Dashboard

1. æ‰“é–‹ [Railway Dashboard](https://railway.app/dashboard)
2. é»æ“Šæœå‹™ `ai-news-worker`

### æ­¥é©Ÿ 2: æŸ¥çœ‹éƒ¨ç½²æ—¥èªŒ

1. å‰å¾€ **Deployments** æ¨™ç±¤
2. é»æ“Šæœ€æ–°çš„éƒ¨ç½²
3. æŸ¥çœ‹ **Build Logs** å’Œ **Deploy Logs**

**Build Logs æ‡‰è©²é¡¯ç¤º**:
```
Building Docker image...
Step 1/7 : FROM python:3.9-slim
Step 2/7 : WORKDIR /app
...
Successfully built ...
Successfully tagged ...
```

**Deploy Logs æ‡‰è©²é¡¯ç¤º**:
```
â° AI News Worker æ’ç¨‹å™¨å·²å•Ÿå‹•
ğŸš€ é–‹å§‹åŸ·è¡Œæ¯æ—¥ä»»å‹™ï¼š2025-12-26
...
```

### æ­¥é©Ÿ 3: æŸ¥çœ‹é‹è¡Œæ—¥èªŒ

1. å‰å¾€ **Logs** æ¨™ç±¤
2. æŸ¥çœ‹å³æ™‚æ—¥èªŒè¼¸å‡º

**æ­£å¸¸é‹è¡Œæ‡‰è©²çœ‹åˆ°**:
```
â° AI News Worker æ’ç¨‹å™¨å·²å•Ÿå‹•
============================================================
ç­‰å¾…æ’ç¨‹è§¸ç™¼...
```

**åŸ·è¡Œä»»å‹™æ™‚æ‡‰è©²çœ‹åˆ°**:
```
ğŸš€ é–‹å§‹åŸ·è¡Œæ¯æ—¥ä»»å‹™ï¼š2025-12-26
ğŸ•·ï¸ [Scraper] é–‹å§‹æŠ“å–å¤–éƒ¨ RSSï¼ˆéå»24å°æ™‚ï¼‰...
âœ… [Scraper] æˆåŠŸæŠ“å– X ç¯‡éå»24å°æ™‚å…§çš„çœŸå¯¦æ–°èã€‚
ğŸ§  [2/5] æ­£åœ¨åˆ†é¡ X ç¯‡æ–°èï¼ˆä¸¦è¡Œè™•ç†ï¼‰...
...
âœ… ä»»å‹™æˆåŠŸï¼çœŸå¯¦æ—¥å ±å·²å­˜å…¥: daily_news/2025-12-26
```

---

## 5ï¸âƒ£ æŸ¥çœ‹å¿«å–æª”æ¡ˆ

### æŸ¥çœ‹å¿«å–ç›®éŒ„

```bash
cd backend
ls -la .llm_cache/
```

**è¼¸å‡ºç¯„ä¾‹**:
```
total 48
-rw-r--r--  1 user  staff  1234 Dec 26 10:00 article_abc123.json
-rw-r--r--  1 user  staff  2345 Dec 26 10:01 article_def456.json
-rw-r--r--  1 user  staff  3456 Dec 26 10:02 category_ghi789.json
...
```

### æŸ¥çœ‹å¿«å–å…§å®¹

```bash
# æŸ¥çœ‹å–®ç¯‡æ–‡ç« å¿«å–
cat .llm_cache/article_*.json | jq '.result.summary' | head -5

# æŸ¥çœ‹åˆ†é¡å¿«å–
cat .llm_cache/category_*.json | jq '.result.executive_summary' | head -3
```

### æŸ¥çœ‹å¿«å–çµ±è¨ˆ

```python
from cache_manager import get_cache_stats, clear_expired_cache

# æŸ¥çœ‹çµ±è¨ˆ
stats = get_cache_stats()
print(f"ç¸½å¿«å–æ•¸: {stats['total']}")
print(f"æŒ‰é¡å‹: {stats['by_type']}")

# æ¸…é™¤éæœŸå¿«å–
clear_expired_cache()
```

---

## ğŸ” é©—è­‰çµæœå®Œæ•´æ€§

### æª¢æŸ¥æ¸…å–®

#### æœ¬åœ°æ¸¬è©¦
- [ ] æ¸¬è©¦è…³æœ¬åŸ·è¡ŒæˆåŠŸ
- [ ] æ²’æœ‰éŒ¯èª¤è¨Šæ¯
- [ ] å¿«å–çµ±è¨ˆé¡¯ç¤ºæœ‰è³‡æ–™

#### Firestore
- [ ] `daily_news` collection æœ‰æ–‡ä»¶
- [ ] æ–‡ä»¶åŒ…å«å®Œæ•´å…§å®¹
- [ ] `article_count` > 0
- [ ] `category_count` > 0

#### å‰ç«¯ç¶²ç«™
- [ ] ç¶²ç«™å¯ä»¥è¨ªå•
- [ ] é¡¯ç¤ºæœ€æ–°æ—¥å ±
- [ ] å…§å®¹æ ¼å¼æ­£ç¢ºï¼ˆMarkdownï¼‰
- [ ] æ²’æœ‰ Console éŒ¯èª¤

#### Railway
- [ ] éƒ¨ç½²æˆåŠŸ
- [ ] æœå‹™é‹è¡Œä¸­
- [ ] æ—¥èªŒé¡¯ç¤ºæ­£å¸¸åŸ·è¡Œ
- [ ] æ²’æœ‰éŒ¯èª¤è¨Šæ¯

---

## ğŸ› å•é¡Œæ’æŸ¥

### å•é¡Œ 1: Firestore æ²’æœ‰è³‡æ–™

**å¯èƒ½åŸå› **:
- æ’ç¨‹å™¨å°šæœªåŸ·è¡Œ
- Firebase é…ç½®éŒ¯èª¤
- å¯«å…¥æ¬Šé™å•é¡Œ

**è§£æ±ºæ–¹æ³•**:
1. æª¢æŸ¥ Railway æ—¥èªŒç¢ºèªæ˜¯å¦åŸ·è¡Œ
2. æª¢æŸ¥ Firebase æœå‹™å¸³è™Ÿé‡‘é‘°
3. æª¢æŸ¥ Firestore è¦å‰‡

### å•é¡Œ 2: å‰ç«¯é¡¯ç¤ºç©ºç™½

**å¯èƒ½åŸå› **:
- Firestore æ²’æœ‰è³‡æ–™
- Firebase é…ç½®éŒ¯èª¤
- ç¶²è·¯é€£ç·šå•é¡Œ

**è§£æ±ºæ–¹æ³•**:
1. æª¢æŸ¥ Firestore æ˜¯å¦æœ‰è³‡æ–™
2. æª¢æŸ¥ F12 Console éŒ¯èª¤è¨Šæ¯
3. ç¢ºèª Firebase ç’°å¢ƒè®Šæ•¸è¨­å®š

### å•é¡Œ 3: Railway æ—¥èªŒæ²’æœ‰è¼¸å‡º

**å¯èƒ½åŸå› **:
- æœå‹™æœªå•Ÿå‹•
- æ’ç¨‹æ™‚é–“æœªåˆ°
- ç’°å¢ƒè®Šæ•¸æœªè¨­å®š

**è§£æ±ºæ–¹æ³•**:
1. æª¢æŸ¥æœå‹™ç‹€æ…‹
2. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
3. æŸ¥çœ‹å®Œæ•´æ—¥èªŒ

---

## ğŸ“ å¿«é€ŸæŸ¥çœ‹æŒ‡ä»¤

### æœ¬åœ°æ¸¬è©¦
```bash
cd backend
./run_local.sh
```

### æŸ¥çœ‹å¿«å–
```bash
cd backend
python3 -c "from cache_manager import get_cache_stats; import json; print(json.dumps(get_cache_stats(), indent=2, ensure_ascii=False))"
```

### æŸ¥çœ‹ Firestoreï¼ˆéœ€è¦ Firebase CLIï¼‰
```bash
firebase firestore:get daily_news/2025-12-26
```

---

## ğŸ¯ æ¨è–¦æŸ¥çœ‹é †åº

1. **æœ¬åœ°æ¸¬è©¦** - ç¢ºèªåŠŸèƒ½æ­£å¸¸
2. **Firestore** - ç¢ºèªè³‡æ–™å·²å¯«å…¥
3. **å‰ç«¯ç¶²ç«™** - ç¢ºèªé¡¯ç¤ºæ­£å¸¸
4. **Railway æ—¥èªŒ** - ç¢ºèªéƒ¨ç½²å’Œé‹è¡Œæ­£å¸¸

---

## ğŸ”— ç›¸é—œé€£çµ

- [Firebase Console](https://console.firebase.google.com)
- [Vercel Dashboard](https://vercel.com/dashboard)
- [Railway Dashboard](https://railway.app/dashboard)
- [æœ¬åœ°æ¸¬è©¦ç’°å¢ƒæŒ‡å—](./æœ¬åœ°æ¸¬è©¦ç’°å¢ƒæŒ‡å—.md)

