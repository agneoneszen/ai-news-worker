# âœ… å®Œæ•´éƒ¨ç½²æª¢æŸ¥æ¸…å–®

## ğŸ¯ ç›®æ¨™

ç¢ºä¿è³‡æ–™èƒ½å¾ Railwayï¼ˆå¾Œç«¯ï¼‰â†’ Firestore â†’ Vercelï¼ˆå‰ç«¯ï¼‰å®Œæ•´æµå‹•ä¸¦é¡¯ç¤ºåœ¨ç¶²é ä¸Šã€‚

---

## ğŸ“‹ Railway (å¾Œç«¯) æª¢æŸ¥

### âœ… Source è¨­å®š
- [x] Root Directory: `backend` âœ… (å·²ç¢ºèª)

### âš ï¸ Build è¨­å®šï¼ˆéœ€è¦ä¿®å¾©ï¼‰
- [ ] **Builder**: æ”¹ç‚º **Metal Build Environment**
  - ç•¶å‰: Nixpacks (Deprecated)
  - ç›®æ¨™: Metal Build Environment

### âœ… Deploy è¨­å®š
- [x] Procfile å­˜åœ¨: `web: python scheduler_continuous.py` âœ…

### âš ï¸ Variables è¨­å®šï¼ˆéœ€è¦ç¢ºèªï¼‰
- [ ] `OPENAI_API_KEY`: å·²è¨­å®š
- [ ] `SERVICE_ACCOUNT_KEY`: å·²è¨­å®šï¼ˆå®Œæ•´ JSONï¼‰

### ğŸ” é©—è­‰
- [ ] Build Logs é¡¯ç¤ºæˆåŠŸ
- [ ] Logs é¡¯ç¤ºæ’ç¨‹å™¨é‹è¡Œ
- [ ] æ²’æœ‰ Railpack éŒ¯èª¤

---

## ğŸ“‹ Vercel (å‰ç«¯) æª¢æŸ¥

### âš ï¸ General è¨­å®šï¼ˆéœ€è¦ç¢ºèªï¼‰
- [ ] **Root Directory**: `frontend`ï¼ˆå¦‚æœå°ˆæ¡ˆçµæ§‹éœ€è¦ï¼‰

### âœ… Build è¨­å®š
- [x] Build Command: `npm run build` âœ…
- [x] Output Directory: `dist` âœ…
- [x] Framework: `vite` âœ…
- [x] vercel.json å­˜åœ¨æ–¼ `frontend/` âœ…

### âš ï¸ Environment Variablesï¼ˆéœ€è¦ç¢ºèªï¼‰
- [ ] `VITE_FIREBASE_API_KEY`
- [ ] `VITE_FIREBASE_AUTH_DOMAIN`
- [ ] `VITE_FIREBASE_PROJECT_ID`
- [ ] `VITE_FIREBASE_STORAGE_BUCKET`
- [ ] `VITE_FIREBASE_MESSAGING_SENDER_ID`
- [ ] `VITE_FIREBASE_APP_ID`

### ğŸ” é©—è­‰
- [ ] ç¶²ç«™å¯ä»¥è¨ªå•
- [ ] Build æˆåŠŸ
- [ ] æ²’æœ‰ Console éŒ¯èª¤

---

## ğŸ“‹ Firebase æª¢æŸ¥

### âœ… Firestore çµæ§‹
- [x] Collection: `daily_news` âœ…
- [x] Document ID: æ—¥æœŸæ ¼å¼ (`YYYY-MM-DD`) âœ…
- [x] æ¬„ä½: `content`, `date_str`, `article_count` ç­‰ âœ…

### âš ï¸ Firestore è¦å‰‡ï¼ˆéœ€è¦ç¢ºèªï¼‰
- [ ] å…è¨±è®€å– `daily_news` collection
- [ ] å¾Œç«¯å¯«å…¥ä¸å—è¦å‰‡é™åˆ¶ï¼ˆä½¿ç”¨æœå‹™å¸³è™Ÿï¼‰

### ğŸ” é©—è­‰
- [ ] `daily_news` collection æœ‰æ–‡ä»¶
- [ ] æ–‡ä»¶åŒ…å« `content` æ¬„ä½
- [ ] æ–‡ä»¶ ID æ˜¯æ—¥æœŸæ ¼å¼

---

## ğŸ”„ è³‡æ–™æµé©—è­‰

### 1. å¾Œç«¯å¯«å…¥ âœ…
```python
# backend/scheduler.py
db.collection('daily_news').document('2025-12-26').set({
    'date_str': '2025-12-26',
    'content': 'Markdown æ—¥å ±...',
    ...
})
```
- **ç‹€æ…‹**: âœ… ç¨‹å¼ç¢¼æ­£ç¢º

### 2. Firestore å„²å­˜ âœ…
- **Collection**: `daily_news`
- **Document**: `2025-12-26`
- **ç‹€æ…‹**: âœ… çµæ§‹æ­£ç¢º

### 3. å‰ç«¯è®€å– âœ…
```javascript
// frontend/src/hooks/useNewsData.js
collection(db, "daily_news")
```
- **ç‹€æ…‹**: âœ… ç¨‹å¼ç¢¼æ­£ç¢º

### 4. å‰ç«¯é¡¯ç¤º âœ…
```jsx
// frontend/src/App.jsx
<ReactMarkdown>{data.content}</ReactMarkdown>
```
- **ç‹€æ…‹**: âœ… ç¨‹å¼ç¢¼æ­£ç¢º

---

## ğŸš€ ç«‹å³è¡Œå‹•

### Railway ä¿®å¾©ï¼ˆå„ªå…ˆï¼‰

1. **åˆ‡æ›åˆ° Metal Build Environment**:
   - Settings > Build
   - Builder: **Metal Build Environment**
   - å„²å­˜

2. **ç¢ºèªç’°å¢ƒè®Šæ•¸**:
   - Settings > Variables
   - ç¢ºèªå·²è¨­å®š

3. **é‡æ–°éƒ¨ç½²**:
   - Deployments > Redeploy

### Vercel æª¢æŸ¥

1. **æª¢æŸ¥ Root Directory**:
   - Settings > General
   - ç¢ºèªæ˜¯å¦éœ€è¦è¨­å®š `frontend`

2. **æª¢æŸ¥ç’°å¢ƒè®Šæ•¸**:
   - Settings > Environment Variables
   - ç¢ºèªæ‰€æœ‰ Firebase è®Šæ•¸å·²è¨­å®š

3. **è§¸ç™¼éƒ¨ç½²**:
   ```bash
   git commit --allow-empty -m "Trigger Vercel deployment"
   git push
   ```

---

## ğŸ“Š é æœŸçµæœ

### Railway
- âœ… Build æˆåŠŸï¼ˆä½¿ç”¨ Metalï¼‰
- âœ… æœå‹™é‹è¡Œä¸­
- âœ… æ’ç¨‹å™¨åŸ·è¡Œä¸¦å¯«å…¥ Firestore

### Firestore
- âœ… `daily_news/2025-12-26` æ–‡ä»¶å­˜åœ¨
- âœ… åŒ…å«å®Œæ•´ `content` æ¬„ä½

### Vercel
- âœ… ç¶²ç«™å¯ä»¥è¨ªå•
- âœ… é¡¯ç¤ºæœ€æ–°æ—¥å ±
- âœ… Console æ²’æœ‰éŒ¯èª¤

---

## ğŸ†˜ å¦‚æœé‚„æ˜¯æœ‰å•é¡Œ

è«‹æä¾›ï¼š
1. **Railway Build Logs**ï¼ˆä½¿ç”¨ Metal å¾Œçš„ï¼‰
2. **Vercel Build Logs**ï¼ˆå¦‚æœæœ‰éŒ¯èª¤ï¼‰
3. **Firebase Console æˆªåœ–**ï¼ˆFirestore è³‡æ–™ï¼‰
4. **å‰ç«¯ Console è¼¸å‡º**ï¼ˆF12 > Consoleï¼‰

æˆ‘å¯ä»¥æ ¹æ“šå¯¦éš›æƒ…æ³æä¾›æ›´å…·é«”çš„è§£æ±ºæ–¹æ¡ˆã€‚

