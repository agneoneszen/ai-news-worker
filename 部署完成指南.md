# âœ… éƒ¨ç½²æº–å‚™å®Œæˆï¼

## ğŸ‰ å·²å®Œæˆçš„å·¥ä½œ

1. âœ… Git repository å·²åˆå§‹åŒ–ä¸¦æäº¤
2. âœ… å‰ç«¯å»ºç½®é…ç½®å®Œæˆ
3. âœ… å¾Œç«¯é•·æœŸé‹è¡Œæ’ç¨‹å™¨å·²å»ºç«‹
4. âœ… æ‰€æœ‰éƒ¨ç½²é…ç½®æ–‡ä»¶å·²å°±ç·’

---

## ğŸš€ ç«‹å³é–‹å§‹éƒ¨ç½²

### æ­¥é©Ÿ 1: å‰ç«¯éƒ¨ç½²ï¼ˆVercelï¼‰

#### æ–¹æ³• A: ä½¿ç”¨éƒ¨ç½²è…³æœ¬ï¼ˆæ¨è–¦ï¼‰

```bash
./deploy_frontend.sh
```

#### æ–¹æ³• B: æ‰‹å‹•éƒ¨ç½²

```bash
cd frontend
npm run build
npx vercel
```

**éƒ¨ç½²æ™‚éœ€è¦è¨­å®šä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š**
- `VITE_FIREBASE_API_KEY`
- `VITE_FIREBASE_AUTH_DOMAIN`
- `VITE_FIREBASE_PROJECT_ID`
- `VITE_FIREBASE_STORAGE_BUCKET`
- `VITE_FIREBASE_MESSAGING_SENDER_ID`
- `VITE_FIREBASE_APP_ID`

å®Œæˆå¾ŒåŸ·è¡Œç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²ï¼š
```bash
npx vercel --prod
```

#### æ–¹æ³• C: é€é Vercel Dashboardï¼ˆæœ€ç°¡å–®ï¼‰

1. å…ˆæ¨é€åˆ° GitHubï¼š
   ```bash
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ¶å/ai-news-worker.git
   git branch -M main
   git push -u origin main
   ```

2. å‰å¾€ https://vercel.com/new
3. é€£æ¥ GitHub ä¸¦é¸æ“‡ repository
4. è¨­å®šï¼š
   - Root Directory: `frontend`
   - Framework: `Vite`
5. åœ¨ Environment Variables ä¸­æ–°å¢æ‰€æœ‰ Firebase è®Šæ•¸
6. é»æ“Š Deploy

---

### æ­¥é©Ÿ 2: å¾Œç«¯éƒ¨ç½²ï¼ˆRailwayï¼‰

#### å‰ç½®æº–å‚™

1. **æ¨é€åˆ° GitHub**ï¼ˆå¦‚æœé‚„æ²’ï¼‰ï¼š
   ```bash
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ¶å/ai-news-worker.git
   git branch -M main
   git push -u origin main
   ```

2. **æº–å‚™æœå‹™å¸³è™Ÿé‡‘é‘°å…§å®¹**ï¼š
   ```bash
   cat backend/serviceAccountKey.json
   ```
   è¤‡è£½å®Œæ•´çš„ JSON å…§å®¹

#### Railway éƒ¨ç½²æ­¥é©Ÿ

1. **å»ºç«‹å°ˆæ¡ˆ**ï¼š
   - å‰å¾€ https://railway.app/
   - é»æ“Š "New Project"
   - é¸æ“‡ "Deploy from GitHub repo"
   - é¸æ“‡æ‚¨çš„ repository

2. **è¨­å®šæœå‹™**ï¼š
   - Railway æœƒè‡ªå‹•åµæ¸¬ `backend/Dockerfile`
   - ç¢ºèª Root Directory è¨­ç‚º `backend`
   - ç¢ºèªä½¿ç”¨ `scheduler_continuous.py`ï¼ˆå·²åœ¨ Dockerfile ä¸­è¨­å®šï¼‰

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**ï¼š
   åœ¨ Railway Dashboard > Variables ä¸­æ–°å¢ï¼š
   ```
   OPENAI_API_KEY=ä½ çš„_openai_api_key
   ```

4. **ä¸Šå‚³æœå‹™å¸³è™Ÿé‡‘é‘°**ï¼š
   - åœ¨ Railway Dashboard > Settings > Secrets
   - å»ºç«‹æ–°çš„ Secretï¼š
     - åç¨±: `SERVICE_ACCOUNT_KEY`
     - å…§å®¹: è²¼ä¸Š `serviceAccountKey.json` çš„å®Œæ•´ JSON å…§å®¹

5. **å®Œæˆ**ï¼š
   - Railway æœƒè‡ªå‹•é–‹å§‹éƒ¨ç½²
   - æŸ¥çœ‹ Logs ç¢ºèªæœå‹™æ­£å¸¸é‹è¡Œ
   - æ’ç¨‹å™¨æœƒåœ¨æ¯å¤© 09:00 UTC è‡ªå‹•åŸ·è¡Œ

---

## ğŸ“‹ éƒ¨ç½²æª¢æŸ¥æ¸…å–®

### å‰ç«¯
- [ ] å·²å–å¾— Firebase Web é…ç½®
- [ ] å·²è¨­å®šæ‰€æœ‰ç’°å¢ƒè®Šæ•¸
- [ ] å»ºç½®æˆåŠŸ
- [ ] ç¶²ç«™å¯æ­£å¸¸è¨ªå•
- [ ] Firestore é€£ç·šæ­£å¸¸

### å¾Œç«¯
- [ ] å·²å–å¾— OpenAI API Key
- [ ] å·²è¨­å®š `OPENAI_API_KEY` ç’°å¢ƒè®Šæ•¸
- [ ] å·²ä¸Šå‚³ `SERVICE_ACCOUNT_KEY` Secret
- [ ] æœå‹™æ­£å¸¸é‹è¡Œ
- [ ] æ—¥èªŒé¡¯ç¤ºæ’ç¨‹å™¨å·²å•Ÿå‹•

---

## ğŸ” é©—è­‰éƒ¨ç½²

### å‰ç«¯é©—è­‰

1. è¨ªå•éƒ¨ç½²çš„ URL
2. æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· > Console
3. ç¢ºèªæ²’æœ‰ Firebase é€£ç·šéŒ¯èª¤
4. æª¢æŸ¥æ˜¯å¦å¯ä»¥è®€å– Firestore è³‡æ–™

### å¾Œç«¯é©—è­‰

1. æŸ¥çœ‹ Railway Logsï¼Œæ‡‰è©²çœ‹åˆ°ï¼š
   ```
   â° AI News Worker æ’ç¨‹å™¨å·²å•Ÿå‹•
   ğŸ“… ä¸‹æ¬¡åŸ·è¡Œæ™‚é–“: ...
   ```

2. ç­‰å¾…æ’ç¨‹æ™‚é–“æˆ–æ‰‹å‹•è§¸ç™¼æ¸¬è©¦ï¼š
   - å¯ä»¥æš«æ™‚ä¿®æ”¹ `scheduler_continuous.py` ä¸­çš„æ’ç¨‹ç‚ºæ¯å°æ™‚åŸ·è¡Œ
   - æˆ–ç­‰å¾…åˆ°è¨­å®šçš„åŸ·è¡Œæ™‚é–“

3. æª¢æŸ¥ Firestoreï¼š
   - å‰å¾€ Firebase Console > Firestore
   - ç¢ºèª `daily_news` collection ä¸­æœ‰æ–°è³‡æ–™

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å‰ç«¯ç„¡æ³•é€£ç·š Firebase

1. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢ºè¨­å®š
2. ç¢ºèª Firestore è¦å‰‡å…è¨±è®€å–ï¼š
   ```javascript
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /daily_news/{document=**} {
         allow read: if true;
       }
     }
   }
   ```

### å¾Œç«¯ç„¡æ³•å¯«å…¥ Firestore

1. æª¢æŸ¥ `SERVICE_ACCOUNT_KEY` Secret æ˜¯å¦æ­£ç¢º
2. ç¢ºèªæœå‹™å¸³è™Ÿæœ‰ Firestore å¯«å…¥æ¬Šé™
3. æŸ¥çœ‹ Railway Logs ä¸­çš„éŒ¯èª¤è¨Šæ¯

### æ’ç¨‹å™¨æœªåŸ·è¡Œ

1. ç¢ºèªæœå‹™æ­£åœ¨é‹è¡Œï¼ˆæŸ¥çœ‹ Railway Logsï¼‰
2. æª¢æŸ¥æ’ç¨‹æ™‚é–“è¨­å®š
3. ç¢ºèªæ™‚å€è¨­å®šï¼ˆé è¨­ç‚º UTCï¼‰

---

## ğŸ“ é‡è¦æª”æ¡ˆèªªæ˜

- `backend/scheduler.py` - ä¸€æ¬¡æ€§åŸ·è¡Œç‰ˆæœ¬ï¼ˆæœ¬åœ°æ¸¬è©¦ç”¨ï¼‰
- `backend/scheduler_continuous.py` - é•·æœŸé‹è¡Œç‰ˆæœ¬ï¼ˆéƒ¨ç½²ç”¨ï¼‰
- `backend/Dockerfile` - Docker é…ç½®ï¼ˆå·²è¨­å®šä½¿ç”¨é•·æœŸé‹è¡Œç‰ˆæœ¬ï¼‰
- `frontend/vercel.json` - Vercel éƒ¨ç½²é…ç½®
- `frontend/netlify.toml` - Netlify éƒ¨ç½²é…ç½®

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **åŸ·è¡Œå‰ç«¯éƒ¨ç½²**ï¼šä½¿ç”¨ `./deploy_frontend.sh` æˆ– Vercel Dashboard
2. **åŸ·è¡Œå¾Œç«¯éƒ¨ç½²**ï¼šæŒ‰ç…§ä¸Šæ–¹ Railway æ­¥é©Ÿ
3. **æ¸¬è©¦é€£ç·š**ï¼šç¢ºèªå‰ç«¯å¯ä»¥è®€å–å¾Œç«¯å¯«å…¥çš„è³‡æ–™
4. **ç›£æ§é‹è¡Œ**ï¼šå®šæœŸæª¢æŸ¥æ—¥èªŒå’Œ Firestore è³‡æ–™

---

## ğŸ’¡ æç¤º

- å‰ç«¯éƒ¨ç½²å®Œæˆå¾Œï¼ŒVercel æœƒæä¾›ä¸€å€‹ URL
- å¾Œç«¯éƒ¨ç½²å®Œæˆå¾Œï¼ŒRailway æœƒæä¾›ä¸€å€‹æœå‹™ URL
- å»ºè­°è¨­å®šç›£æ§å‘Šè­¦ï¼Œç¢ºä¿æœå‹™æ­£å¸¸é‹è¡Œ
- å®šæœŸæª¢æŸ¥ OpenAI API ä½¿ç”¨é‡ï¼Œé¿å…è¶…å‡ºé ç®—

ç¥éƒ¨ç½²é †åˆ©ï¼ğŸ‰

